(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{23:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var r,c=n(8),s=n.n(c),a=n(6),o=n(14),u=n(3),i=n(4),l=n(2),p=n.n(l),j=n(0),d=(n(23),n(24),function(t){return t.posts}),f=function(t){return t.users},b=function(t){return t.postComments},m="https://mate.academy/students-api",O=function(){var t=Object(u.a)(p.a.mark((function t(e,n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,n);case 2:return t.abrupt("return",t.sent.json());case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(m,"/users"));case 2:return t.abrupt("return",t.sent.json());case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=n(7);!function(t){t.SET_POSTS="SET_POSTS",t.SET_USERS="SET_USERS",t.SET_POST_COMMENTS="SET_POST_COMMENTS"}(r||(r={}));var v=Object(x.b)(r.SET_POSTS),_=Object(x.b)(r.SET_USERS),w=Object(x.b)(r.SET_POST_COMMENTS),S=Object(x.c)({posts:[],users:[],postComments:[]},(function(t){t.addCase(v,(function(t,e){t.posts=e.payload})),t.addCase(_,(function(t,e){t.users=e.payload})),t.addCase(w,(function(t,e){t.postComments=e.payload}))})),N=Object(x.a)({reducer:S}),y=function(){var t=Object(u.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(m,"/posts"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(u.a)(p.a.mark((function t(e){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(m,"/posts/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(u.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("".concat(m,"/posts/").concat(e),{method:"DELETE"});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=(n(25),n(1)),P=function(t){var e=t.userId,n=t.onPostIdHandler,r=t.selectedPostId,c=Object(a.b)(),s=Object(a.c)(d),o=Object(a.c)(function(t){return function(e){return e.posts.filter((function(e){return e.userId===t}))}}(+e));Object(j.useEffect)((function(){var t=function(){var t=Object(u.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:e=t.sent,c(v(e));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),Object(j.useEffect)((function(){c(v(o))}),[e]);var i=function(){var t=Object(u.a)(p.a.mark((function t(e){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e);case 2:return t.next=4,y();case 4:n=t.sent,c(v(n));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:"PostsList",children:[Object(C.jsx)("h2",{children:"Posts:"}),Object(C.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:s.map((function(t){return Object(C.jsxs)("li",{className:"PostsList__item",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"User# ".concat(t.userId)}),t.title]}),Object(C.jsxs)("div",{className:"buttons",children:[Object(C.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return e=t.id,void n(r!==e?e:null);var e},children:r===t.id?"Close":"Open"}),Object(C.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return i(t.id)},children:"Delete"})]})]},t.id)}))})]})},T=n(13),I=n.n(T),g=function(){var t=Object(u.a)(p.a.mark((function t(e){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("".concat(m,"/comments?postId=").concat(e),{method:"GET"});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=Object(u.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("".concat(m,"/comments/").concat(e),{method:"DELETE"});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=Object(u.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O("".concat(m,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=(n(27),n(28),function(t){var e=t.postId,n=t.onCommentsHandler,r=Object(j.useState)(""),c=Object(i.a)(r,2),s=c[0],a=c[1],o=Object(j.useState)(""),l=Object(i.a)(o,2),d=l[0],f=l[1],b=Object(j.useState)(""),m=Object(i.a)(b,2),O=m[0],h=m[1],x=Object(j.useState)(!1),v=Object(i.a)(x,2),_=v[0],w=v[1],S=function(){var t=Object(u.a)(p.a.mark((function t(r){var c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),!(s&&d&&O)){t.next=12;break}return c={postId:e,name:s,email:d,body:O},t.next=5,A(c);case 5:n(),w(!1),a(""),f(""),h(""),t.next=13;break;case 12:w(!0);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsxs)("form",{className:"NewCommentForm",onSubmit:S,children:[Object(C.jsx)("div",{className:"form-field",children:Object(C.jsx)("input",{type:"text",name:"name",value:s,onChange:function(t){return a(t.target.value)},placeholder:"Your name",className:"NewCommentForm__input"})}),Object(C.jsx)("div",{className:"form-field",children:Object(C.jsx)("input",{type:"text",name:"email",value:d,onChange:function(t){return f(t.target.value)},placeholder:"Your email",className:"NewCommentForm__input"})}),Object(C.jsx)("div",{className:"form-field",children:Object(C.jsx)("textarea",{name:"body",value:O,onChange:function(t){return h(t.target.value)},placeholder:"Type comment here",className:"NewCommentForm__input"})}),_&&Object(C.jsx)("div",{className:"error",children:"Please, fill in all fields"}),Object(C.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),L=function(t){var e=t.postId,n=Object(a.b)(),r=Object(a.c)(b),c=Object(j.useState)(!0),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(j.useState)(null),f=Object(i.a)(d,2),m=f[0],O=f[1],h=Object(j.useState)(!1),x=Object(i.a)(h,2),v=x[0],_=x[1],S=function(){var t=Object(u.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E(e);case 3:n=t.sent,O(n),_(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),_(!0),O(null);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();Object(j.useEffect)((function(){var t=function(){var t=Object(u.a)(p.a.mark((function t(){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e);case 2:r=t.sent,n(w(r));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t(),S()}),[e]);var N=function(){var t=Object(u.a)(p.a.mark((function t(r){var c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}return t.next=3,D(r);case 3:return t.next=5,g(e);case 5:c=t.sent,n(w(c));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(u.a)(p.a.mark((function t(){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e);case 2:r=t.sent,n(w(r));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:"PostDetails",children:[Object(C.jsx)("h2",{children:"Post details:"}),v?Object(C.jsx)("p",{className:"error",children:"An error occurred while loading the data"}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("section",{className:"PostDetails__post",children:Object(C.jsx)("p",{children:null===m||void 0===m?void 0:m.body})}),Object(C.jsxs)("section",{className:"PostDetails__comments",children:[Object(C.jsx)("button",{type:"button",className:I()("button",{noshow:r.length<1}),onClick:function(){l(!o)},children:o?"Hide comments":"Show comments"}),o&&Object(C.jsx)("ul",{className:"PostDetails__list",children:null===r||void 0===r?void 0:r.map((function(t){return Object(C.jsxs)("li",{className:"PostDetails__list-item",children:[Object(C.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return N(t.id)},children:"X"}),Object(C.jsx)("p",{children:t.body})]},t.id)}))})]}),Object(C.jsx)("section",{children:Object(C.jsx)("div",{className:"PostDetails__form-wrapper",children:m&&Object(C.jsx)(F,{postId:e,onCommentsHandler:y})})})]})]})},M=function(){var t=Object(a.b)(),e=Object(a.c)(f),n=Object(j.useState)(""),r=Object(i.a)(n,2),c=r[0],s=r[1],o=Object(j.useState)(0),l=Object(i.a)(o,2),d=l[0],b=l[1];return Object(j.useEffect)((function(){var e=function(){var e=Object(u.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:n=e.sent,t(_(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)("header",{className:"App__header",children:Object(C.jsxs)("label",{children:["Select a user: \xa0",Object(C.jsxs)("select",{className:"App__user-selector",onChange:function(t){return s(t.target.value)},children:[Object(C.jsx)("option",{value:"0",children:"All users"}),e.map((function(t){return Object(C.jsx)("option",{value:t.id,children:t.name},t.id)}))]})]})}),Object(C.jsxs)("main",{className:"App__main",children:[Object(C.jsx)("div",{className:"App__sidebar",children:Object(C.jsx)(P,{userId:c,onPostIdHandler:function(t){b(t||0)},selectedPostId:d})}),Object(C.jsx)("div",{className:"App__content",children:d?Object(C.jsx)(L,{postId:d}):Object(C.jsx)("p",{children:"No selected posts"})})]})]})},H=function(){return Object(C.jsx)(a.a,{store:N,children:Object(C.jsx)(o.a,{children:Object(C.jsx)(M,{})})})};s.a.render(Object(C.jsx)(H,{}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.0bfe30f0.chunk.js.map